{"version":3,"file":"module.js","sources":["../../../node_modules/@babel/runtime/helpers/extends.js","../../../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../src/icons/InsertPluginIcon.jsx","../src/icons/MediaReplaceIcon.jsx","../../../node_modules/@babel/runtime/helpers/inheritsLoose.js","../src/toolbar/YoutubeSelectionInputModal.jsx","../src/toolbar/selectionModalCustomStyles.js","../src/toolbar/inline-video-buttons.jsx","../src/get-video-source.js","../src/youtube-viewer.jsx","../src/types.js","../src/youtube-component.jsx","../src/toolbar/insert-video-buttons.jsx","../src/toolbar/createToolbar.js","../src/createYoutubePlugin.js","../src/Youtube-viewer.jsx","../src/modals.js"],"sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","/* eslint-disable max-len */\r\nimport React from 'react';\r\n\r\nconst InsertPluginIcon = props => (\r\n  <svg xmlnsXlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 19 19\" {...props}>\r\n    <defs>\r\n      <path\r\n        id=\"video-icon-path\"\r\n        d=\"M14 7l2.842-1.421A.8.8 0 0 1 18 6.294v6.412a.8.8 0 0 1-1.158.715L14 12v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h11a1 1 0 0 1 1 1v2zm0 3.9l2.708 1.354a.2.2 0 0 0 .29-.179V6.922a.2.2 0 0 0-.29-.178L14 8.098V10.9zM2 5v9h11V5H2z\"\r\n      />\r\n    </defs>\r\n    <g fillRule=\"evenodd\">\r\n      <mask id=\"video-icon-mask\">\r\n        <use xlinkHref=\"#video-icon-path\" />\r\n      </mask>\r\n      <use fillRule=\"nonzero\" xlinkHref=\"#video-icon-path\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nexport default InsertPluginIcon;\r\n","/* eslint-disable max-len */\r\nimport React from 'react';\r\n\r\nconst MediaReplaceIcon = props => (\r\n  <svg\r\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\r\n    width={19}\r\n    height={19}\r\n    viewBox=\"0 0 19 19\"\r\n    {...props}\r\n  >\r\n    <defs>\r\n      <path\r\n        id=\"replace-path\"\r\n        d=\"M3 7.8V3.2c0-.11.09-.2.2-.2h.6c.11 0 .2.09.2.2v2.592A6.607 6.607 0 0 1 9.412 3C13.05 3 16 5.91 16 9.5c0 .168-.006.335-.02.5h-1.016a5.51 5.51 0 0 0 .022-.5c0-3.038-2.495-5.5-5.574-5.5a5.583 5.583 0 0 0-4.967 3H7.8c.11 0 .2.09.2.2v.6a.2.2 0 0 1-.2.2H3.2a.2.2 0 0 1-.2-.2zm13 3.4v4.6a.2.2 0 0 1-.2.2h-.6a.2.2 0 0 1-.2-.2v-2.592A6.607 6.607 0 0 1 9.588 16C5.95 16 3 13.09 3 9.5c0-.168.006-.335.02-.5h1.016a5.496 5.496 0 0 0-.022.5c0 3.038 2.495 5.5 5.574 5.5a5.583 5.583 0 0 0 4.967-3H11.2a.2.2 0 0 1-.2-.2v-.6c0-.11.09-.2.2-.2h4.6c.11 0 .2.09.2.2z\"\r\n      />\r\n    </defs>\r\n    <g fillRule=\"evenodd\">\r\n      <mask id=\"replace-mask\">\r\n        <use xlinkHref=\"#replace-path\" />\r\n      </mask>\r\n      <use fillRule=\"nonzero\" xlinkHref=\"#replace-path\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nexport default MediaReplaceIcon;\r\n","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","import PropTypes from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport {\r\n  mergeStyles,\r\n  isVideoUrl,\r\n  TextInput,\r\n  CloseIcon,\r\n  Button,\r\n  WixUtils,\r\n} from 'wix-rich-content-common';\r\nimport styles from '../../statics/styles/video-selection-input-modal.scss';\r\n\r\nexport default class YoutubeSelectionInputModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.styles = mergeStyles({ styles, theme: props.theme });\r\n    const { componentData } = this.props;\r\n    this.state = {\r\n      url: (!componentData.isCustomVideo && componentData.src) || '',\r\n      pathname: '',\r\n      thumbnail: { pathname: '', width: 0, height: 0 },\r\n      isCustomVideo: false,\r\n      errorMsg: '',\r\n    };\r\n  }\r\n\r\n  onUrlChange = e => {\r\n    const url = e.target.value;\r\n    this.setState({ url });\r\n  };\r\n\r\n  afterOpenModal = () => this.input.focus();\r\n\r\n  onConfirm = () => {\r\n    const { url, pathname, thumbnail, isCustomVideo } = this.state;\r\n    const src = pathname.length ? { pathname, thumbnail } : url;\r\n    if (isVideoUrl(url) || isCustomVideo) {\r\n      const { componentData, helpers, pubsub, onConfirm } = this.props;\r\n      if (onConfirm) {\r\n        onConfirm({ ...componentData, src, isCustomVideo: this.state.isCustomVideo });\r\n      } else {\r\n        pubsub.update('componentData', { src, isCustomVideo: this.state.isCustomVideo });\r\n      }\r\n\r\n      if (helpers && helpers.onVideoSelected) {\r\n        helpers.onVideoSelected(src, data =>\r\n          pubsub.update('componentData', { metadata: { ...data } })\r\n        );\r\n      }\r\n\r\n      this.onCloseRequested();\r\n    } else {\r\n      this.setState({ submitted: true });\r\n    }\r\n  };\r\n\r\n  handleCustomVideoUpload = ({ data, error }) => {\r\n    if (error) {\r\n      this.setState({ errorMsg: error.msg });\r\n    } else {\r\n      if (data.pathname) {\r\n        this.setState({\r\n          url: '',\r\n          pathname: data.pathname,\r\n          thumbnail: data.thumbnail,\r\n          isCustomVideo: true,\r\n        });\r\n      } else {\r\n        this.setState({ url: data.url, pathname: '', isCustomVideo: true });\r\n      }\r\n      this.onConfirm();\r\n    }\r\n  };\r\n\r\n  onCloseRequested = () => {\r\n    this.setState({ isOpen: false });\r\n    this.props.helpers.closeModal();\r\n  };\r\n\r\n  handleKeyPress = e => {\r\n    if (e.charCode === 13) {\r\n      this.onConfirm();\r\n    }\r\n  };\r\n\r\n  //These two function needed to handle onFocus select for iphone devices\r\n  componentDidMount() {\r\n    this.input.focus();\r\n    this.input.setSelectionRange(0, this.input.value.length);\r\n  }\r\n\r\n  render() {\r\n    const { url, submitted, errorMsg } = this.state;\r\n    const { t, handleFileSelection, enableCustomUploadOnMobile } = this.props;\r\n    const { styles } = this;\r\n    const uploadVideoSection = (\r\n      <div>\r\n        <div className={styles.video_modal_or_upload_video_from}>\r\n          {t('VideoUploadModal_CustomVideoHeader')}\r\n        </div>\r\n        <div className={styles.video_modal_upload_video}>\r\n          <div\r\n            role=\"button\"\r\n            onClick={() =>\r\n              handleFileSelection(\r\n                ({ data, error }) => this.handleCustomVideoUpload({ data, error }),\r\n                () => this.onCloseRequested()\r\n              )\r\n            }\r\n            tabIndex={0}\r\n            onKeyDown={() =>\r\n              handleFileSelection(({ data, error }) =>\r\n                this.handleCustomVideoUpload({ data, error })\r\n              )\r\n            }\r\n          >\r\n            + {t('VideoUploadModal_CustomVideoClickText')}\r\n          </div>\r\n          {errorMsg.length > 0 && <div className={styles.video_modal_error_msg}>{errorMsg}</div>}\r\n        </div>\r\n      </div>\r\n    );\r\n    return (\r\n      <div>\r\n        <div\r\n          className={styles[`video_modal_container_${handleFileSelection ? 'big' : 'small'}`]}\r\n          data-hook=\"videoUploadModal\"\r\n        >\r\n          {!WixUtils.isMobile() && (\r\n            <CloseIcon\r\n              className={styles.video_modal_closeIcon}\r\n              onClick={() => this.onCloseRequested()}\r\n            />\r\n          )}\r\n          <h2 className={styles.video_modal_add_a_Video}>{t('VideoUploadModal_Title')}</h2>\r\n          <div\r\n            role=\"heading\"\r\n            aria-labelledby=\"video_modal_hdr\"\r\n            className={styles.video_modal_header}\r\n          >\r\n            <h3 id=\"video_modal_hdr\" className={styles.video_modal_header_text}>\r\n              {t('VideoUploadModal_Header')}\r\n            </h3>\r\n          </div>\r\n          <div>\r\n            <div\r\n              className={\r\n                styles[`video_modal_textInput_${handleFileSelection ? 'customWidth' : 'fullWidth'}`]\r\n              }\r\n            >\r\n              <TextInput\r\n                inputRef={ref => {\r\n                  this.input = ref;\r\n                }}\r\n                type=\"url\"\r\n                onKeyPress={this.handleKeyPress}\r\n                onChange={this.onUrlChange}\r\n                value={url}\r\n                error={\r\n                  !isVideoUrl(url) && submitted ? t('VideoUploadModal_Input_InvalidUrl') : null\r\n                }\r\n                placeholder={t('VideoUploadModal_Input_Placeholder')}\r\n                theme={styles}\r\n                data-hook=\"videoUploadModalInput\"\r\n              />\r\n            </div>\r\n            <Button\r\n              className={\r\n                styles[`video_modal_add_button_${handleFileSelection ? 'inline' : 'inMiddle'}`]\r\n              }\r\n              onClick={() => this.onConfirm()}\r\n              ariaProps={!this.state.url && { disabled: 'disabled' }}\r\n            >\r\n              {t('VideoUploadModal_AddButtonText')}\r\n            </Button>\r\n          </div>\r\n          {(!WixUtils.isMobile() || enableCustomUploadOnMobile) &&\r\n            handleFileSelection &&\r\n            uploadVideoSection}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nYoutubeSelectionInputModal.propTypes = {\r\n  onConfirm: PropTypes.func,\r\n  pubsub: PropTypes.object,\r\n  helpers: PropTypes.object.isRequired,\r\n  componentData: PropTypes.object.isRequired,\r\n  url: PropTypes.string,\r\n  theme: PropTypes.object.isRequired,\r\n  doneLabel: PropTypes.string,\r\n  cancelLabel: PropTypes.string,\r\n  t: PropTypes.func,\r\n  handleFileSelection: PropTypes.func,\r\n  enableCustomUploadOnMobile: PropTypes.bool,\r\n};\r\n","export const SelectionModalCustomStyle = {\r\n  content: {\r\n    maxWidth: '580px',\r\n    minHeight: '260px',\r\n  },\r\n};\r\n\r\nexport const ExtendedSelectionModalCustomStyle = {\r\n  content: {\r\n    maxWidth: '580px',\r\n    minHeight: '378px',\r\n  },\r\n};\r\n","import {\r\n  BUTTONS,\r\n  getModalStyles,\r\n  decorateComponentWithProps,\r\n  WixUtils,\r\n} from 'wix-rich-content-common';\r\nimport { MediaReplaceIcon } from '../icons';\r\nimport YoutubeSelectionInputModal from './YoutubeSelectionInputModal';\r\nimport {\r\n  SelectionModalCustomStyle,\r\n  ExtendedSelectionModalCustomStyle,\r\n} from './selectionModalCustomStyles';\r\n\r\nexport default ({ t, settings }) => {\r\n  return [\r\n    { keyName: 'sizeSmallCenter', type: BUTTONS.SIZE_SMALL_CENTER, mobile: false },\r\n    { keyName: 'sizeContent', type: BUTTONS.SIZE_CONTENT, mobile: false },\r\n    { keyName: 'sizeFullWidth', type: BUTTONS.SIZE_FULL_WIDTH, mobile: false },\r\n    { keyName: 'separator1', type: BUTTONS.SEPARATOR, mobile: false },\r\n    { keyName: 'sizeSmallLeft', type: BUTTONS.SIZE_SMALL_LEFT, mobile: false },\r\n    { keyName: 'sizeSimallRight', type: BUTTONS.SIZE_SMALL_RIGHT, mobile: false },\r\n    { keyName: 'separator2', type: BUTTONS.SEPARATOR, mobile: false },\r\n    {\r\n      keyName: 'replace',\r\n      type: BUTTONS.EXTERNAL_MODAL,\r\n      icon: MediaReplaceIcon,\r\n      modalElement: decorateComponentWithProps(YoutubeSelectionInputModal, settings),\r\n      modalStyles: getModalStyles({\r\n        //apply the extended input modal styles if handleFileSelection is avilable in plugin config\r\n        //& on mobile if enableCustomUploadOnMobile is set to true, otherwise the normal modal styles is applied\r\n        customStyles:\r\n          (!WixUtils.isMobile() || settings.enableCustomUploadOnMobile) &&\r\n            settings.handleFileSelection\r\n            ? ExtendedSelectionModalCustomStyle\r\n            : SelectionModalCustomStyle,\r\n        fullScreen: false,\r\n      }),\r\n      mobile: true,\r\n      tooltipTextKey: 'ReplaceVideoButton_Tooltip',\r\n      t,\r\n    },\r\n    { keyName: 'delete', type: BUTTONS.DELETE, mobile: true },\r\n  ];\r\n};\r\n","const getVideoSrc = (src, settings = {}) => {\r\n  if (typeof src === 'object') {\r\n    if (settings && settings.getVideoUrl) {\r\n      return settings.getVideoUrl(src);\r\n    } else {\r\n      console.error('must set getVideoUrl in plugin config when using custom video source!', src); //eslint-disable-line no-console\r\n    }\r\n  }\r\n\r\n  return src;\r\n};\r\n\r\nexport default getVideoSrc;\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ReactPlayer from 'react-player';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { mergeStyles, validate, Context } from 'wix-rich-content-common';\r\nimport isEqual from 'lodash/isEqual';\r\nimport getVideoSrc from './get-video-source';\r\nimport schema from '../statics/data-schema.json';\r\nimport styles from '../statics/styles/video-viewer.scss';\r\n\r\nclass YoutubeViewer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    validate(props.componentData, schema);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (!isEqual(nextProps.componentData, this.props.componentData)) {\r\n      validate(nextProps.componentData, schema);\r\n    }\r\n  }\r\n\r\n  normalizeUrl = url => (url.toLowerCase().indexOf('vimeo') === 0 ? 'https://' + url : url); //vimeo player needs urls prefixed with http[s]\r\n\r\n  getVideoRatio = wrapper => {\r\n    const element = wrapper.querySelector('iframe, video');\r\n    return element.clientHeight / element.clientWidth;\r\n  };\r\n\r\n  fixVideoRatio = () => {\r\n    // eslint-disable-next-line react/no-find-dom-node\r\n    const wrapper = ReactDOM.findDOMNode(this).parentNode;\r\n    const ratio = this.getVideoRatio(wrapper);\r\n    wrapper.style['padding-bottom'] = ratio * 100 + '%';\r\n  };\r\n\r\n  render() {\r\n    const { componentData, settings, ...rest } = this.props;\r\n    this.styles = this.styles || mergeStyles({ styles, theme: this.context.theme });\r\n    const url = this.normalizeUrl(getVideoSrc(componentData.src, settings));\r\n    const props = { ...rest, url, onReady: this.fixVideoRatio };\r\n    return <ReactPlayer className={classNames(this.styles.video_player)} {...props} />;\r\n  }\r\n}\r\n\r\nYoutubeViewer.propTypes = {\r\n  componentData: PropTypes.object.isRequired,\r\n  onReady: PropTypes.func,\r\n  onStart: PropTypes.func,\r\n  controls: PropTypes.bool,\r\n  width: PropTypes.string,\r\n  height: PropTypes.string,\r\n  settings: PropTypes.object.isRequired,\r\n};\r\n\r\nYoutubeViewer.contextType = Context.type;\r\n\r\nYoutubeViewer.defaultProps = {\r\n  width: '100%',\r\n  height: '100%',\r\n  controls: true,\r\n};\r\n\r\nexport default YoutubeViewer;\r\n","const VIDEO_TYPE = 'wix-draft-plugin-youtube';\r\nconst VIDEO_TYPE_LEGACY = 'VIDEO-EMBED';\r\nexport { VIDEO_TYPE_LEGACY, VIDEO_TYPE };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { findDOMNode } from 'react-dom';\r\nimport { mergeStyles, Context } from 'wix-rich-content-common';\r\nimport YoutubeViewer from './youtube-viewer';\r\nimport styles from '../statics/styles/default-video-styles.scss';\r\nimport { VIDEO_TYPE_LEGACY, VIDEO_TYPE } from './types';\r\n\r\nconst DEFAULTS = {\r\n  config: {\r\n    size: 'content',\r\n    alignment: 'center',\r\n  },\r\n};\r\n\r\nclass YoutubeComponent extends React.Component {\r\n  static type = { VIDEO_TYPE_LEGACY, VIDEO_TYPE };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const isPlayable = !props.blockProps || props.blockProps.readOnly === true;\r\n    this.state = {\r\n      isLoading: false,\r\n      isLoaded: false,\r\n      isPlayable,\r\n    };\r\n  }\r\n\r\n  setPlayer = player => {\r\n    this.player = player;\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.handlePlayerFocus();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.handlePlayerFocus();\r\n  }\r\n\r\n  handlePlayerFocus() {\r\n    // eslint-disable-next-line react/no-find-dom-node\r\n    const element = findDOMNode(this).querySelector('iframe, video');\r\n    if (element) {\r\n      element.tabIndex = -1;\r\n    }\r\n  }\r\n\r\n  handleReady = () => {\r\n    if (!this.state.isLoaded) {\r\n      this.setState({ isLoaded: true });\r\n    }\r\n  };\r\n\r\n  renderOverlay = (styles, t) => {\r\n    const { isLoaded } = this.state;\r\n    const overlayText = t('VideoComponent_Overlay');\r\n    return (\r\n      <div className={classNames(styles.video_overlay)}>\r\n        {isLoaded && <span className={styles.video_overlay_message}>{overlayText}</span>}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderPlayer = () => {\r\n    const { componentData, settings } = this.props;\r\n    return (\r\n      <YoutubeViewer\r\n        ref={this.setPlayer}\r\n        componentData={componentData}\r\n        settings={settings}\r\n        onReady={this.handleReady}\r\n      />\r\n    );\r\n  };\r\n\r\n  onKeyDown = (e, handler) => {\r\n    if (e.key === 'Enter' || e.key === ' ') {\r\n      handler();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    this.styles = this.styles || mergeStyles({ styles, theme: this.context.theme });\r\n    const { className, onClick } = this.props;\r\n    const { isPlayable } = this.state;\r\n    const containerClassNames = classNames(this.styles.video_container, className || '');\r\n    /* eslint-disable jsx-a11y/no-static-element-interactions */\r\n    return (\r\n      <div\r\n        data-hook=\"videoPlayer\"\r\n        onClick={onClick}\r\n        className={containerClassNames}\r\n        onKeyDown={e => this.onKeyDown(e, onClick)}\r\n      >\r\n        {!isPlayable && this.renderOverlay(this.styles, this.context.t)}\r\n        {this.renderPlayer()}\r\n      </div>\r\n    );\r\n    /* eslint-enable jsx-a11y/no-static-element-interactions */\r\n  }\r\n}\r\n\r\nYoutubeComponent.propTypes = {\r\n  componentData: PropTypes.object.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  componentState: PropTypes.object.isRequired,\r\n  store: PropTypes.object.isRequired,\r\n  blockProps: PropTypes.object.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n  className: PropTypes.string.isRequired,\r\n};\r\n\r\nYoutubeComponent.contextType = Context.type;\r\n\r\nexport { YoutubeComponent as Component, DEFAULTS };\r\n","import { DEFAULTS } from '../youtube-component';\r\nimport {\r\n  getModalStyles,\r\n  TOOLBARS,\r\n  decorateComponentWithProps,\r\n  WixUtils,\r\n} from 'wix-rich-content-common';\r\nimport YoutubeSelectionInputModal from './YoutubeSelectionInputModal';\r\nimport { InsertPluginIcon } from '../icons';\r\nimport {\r\n  SelectionModalCustomStyle,\r\n  ExtendedSelectionModalCustomStyle,\r\n} from './selectionModalCustomStyles';\r\n\r\nexport default ({ helpers, t, settings }) => {\r\n  return [\r\n    {\r\n      type: 'modal',\r\n      name: 'Video',\r\n      tooltipText: t('VideoPlugin_InsertButton_Tooltip'),\r\n      Icon: InsertPluginIcon,\r\n      componentData: DEFAULTS,\r\n      toolbars: [TOOLBARS.FOOTER, TOOLBARS.SIDE],\r\n      modalElement: decorateComponentWithProps(YoutubeSelectionInputModal, settings),\r\n      modalStyles: getModalStyles({\r\n        //apply the extended input modal styles if handleFileSelection is avilable in plugin config\r\n        //& on mobile if enableCustomUploadOnMobile is set to true, otherwise the normal modal styles is applied\r\n        customStyles:\r\n          (!WixUtils.isMobile() || settings.enableCustomUploadOnMobile) &&\r\n            settings.handleFileSelection\r\n            ? ExtendedSelectionModalCustomStyle\r\n            : SelectionModalCustomStyle,\r\n        fullScreen: false,\r\n      }),\r\n      helpers,\r\n    },\r\n  ];\r\n};\r\n","import createInlineButtons from './inline-video-buttons';\r\nimport createInsertButtons from './insert-video-buttons';\r\n\r\nexport default function createToolbar({ helpers, t, settings }) {\r\n  return {\r\n    InlineButtons: createInlineButtons({ t, settings }),\r\n    InsertButtons: createInsertButtons({ helpers, t, settings }),\r\n    name: 'video',\r\n  };\r\n}\r\n","import createToolbar from './toolbar';\r\nimport { Component } from './youtube-component';\r\nimport { VIDEO_TYPE, VIDEO_TYPE_LEGACY } from './types';\r\nimport { createBasePlugin } from 'wix-rich-content-common';\r\n\r\nconst createYoutubePlugin = (config = {}) => {\r\n  const type = VIDEO_TYPE;\r\n  const { helpers, t, [type]: settings = {}, ...rest } = config;\r\n\r\n  return createBasePlugin({\r\n    component: Component,\r\n    type: VIDEO_TYPE,\r\n    legacyType: VIDEO_TYPE_LEGACY,\r\n    toolbar: createToolbar({\r\n      helpers,\r\n      t,\r\n      settings,\r\n    }),\r\n    helpers,\r\n    settings,\r\n    t,\r\n    ...rest,\r\n  });\r\n};\r\n\r\nexport { createYoutubePlugin };\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ReactPlayer from 'react-player';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { mergeStyles, validate, Context } from 'wix-rich-content-common';\r\nimport isEqual from 'lodash/isEqual';\r\nimport getVideoSrc from './get-video-source';\r\nimport schema from '../statics/data-schema.json';\r\nimport styles from '../statics/styles/video-viewer.scss';\r\n\r\nclass YoutubeViewer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    validate(props.componentData, schema);\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (!isEqual(nextProps.componentData, this.props.componentData)) {\r\n      validate(nextProps.componentData, schema);\r\n    }\r\n  }\r\n\r\n  normalizeUrl = url => (url.toLowerCase().indexOf('vimeo') === 0 ? 'https://' + url : url); //vimeo player needs urls prefixed with http[s]\r\n\r\n  getVideoRatio = wrapper => {\r\n    const element = wrapper.querySelector('iframe, video');\r\n    return element.clientHeight / element.clientWidth;\r\n  };\r\n\r\n  fixVideoRatio = () => {\r\n    // eslint-disable-next-line react/no-find-dom-node\r\n    const wrapper = ReactDOM.findDOMNode(this).parentNode;\r\n    const ratio = this.getVideoRatio(wrapper);\r\n    wrapper.style['padding-bottom'] = ratio * 100 + '%';\r\n  };\r\n\r\n  render() {\r\n    const { componentData, settings, ...rest } = this.props;\r\n    this.styles = this.styles || mergeStyles({ styles, theme: this.context.theme });\r\n    const url = this.normalizeUrl(getVideoSrc(componentData.src, settings));\r\n    const props = { ...rest, url, onReady: this.fixVideoRatio };\r\n    return <ReactPlayer className={classNames(this.styles.video_player)} {...props} />;\r\n  }\r\n}\r\n\r\nYoutubeViewer.propTypes = {\r\n  componentData: PropTypes.object.isRequired,\r\n  onReady: PropTypes.func,\r\n  onStart: PropTypes.func,\r\n  controls: PropTypes.bool,\r\n  width: PropTypes.string,\r\n  height: PropTypes.string,\r\n  settings: PropTypes.object.isRequired,\r\n};\r\n\r\nYoutubeViewer.contextType = Context.type;\r\n\r\nYoutubeViewer.defaultProps = {\r\n  width: '100%',\r\n  height: '100%',\r\n  controls: true,\r\n};\r\n\r\nexport default YoutubeViewer;\r\n","import YoutubeSelectionInputModal from './toolbar/YoutubeSelectionInputModal';\r\n\r\nconst Modals = {\r\n  YOUTUBE_SELECTION_INPUT: 'youtube-selection-input',\r\n};\r\n\r\nconst ModalsMap = {\r\n  [Modals.YOUTUBE_SELECTION_INPUT]: YoutubeSelectionInputModal,\r\n};\r\n\r\nexport { Modals, ModalsMap };\r\n"],"names":["InsertPluginIcon","props","MediaReplaceIcon","YoutubeSelectionInputModal","onUrlChange","e","url","target","value","setState","afterOpenModal","input","focus","onConfirm","state","pathname","thumbnail","isCustomVideo","src","length","isVideoUrl","componentData","helpers","pubsub","update","onVideoSelected","data","metadata","onCloseRequested","submitted","handleCustomVideoUpload","error","errorMsg","msg","isOpen","closeModal","handleKeyPress","charCode","styles","mergeStyles","theme","width","height","componentDidMount","setSelectionRange","render","t","handleFileSelection","enableCustomUploadOnMobile","uploadVideoSection","video_modal_or_upload_video_from","video_modal_upload_video","video_modal_error_msg","WixUtils","isMobile","video_modal_closeIcon","video_modal_add_a_Video","video_modal_header","video_modal_header_text","ref","disabled","Component","propTypes","PropTypes","func","object","isRequired","string","doneLabel","cancelLabel","bool","SelectionModalCustomStyle","content","maxWidth","minHeight","ExtendedSelectionModalCustomStyle","settings","keyName","type","BUTTONS","SIZE_SMALL_CENTER","mobile","SIZE_CONTENT","SIZE_FULL_WIDTH","SEPARATOR","SIZE_SMALL_LEFT","SIZE_SMALL_RIGHT","EXTERNAL_MODAL","icon","modalElement","decorateComponentWithProps","modalStyles","getModalStyles","customStyles","fullScreen","tooltipTextKey","DELETE","getVideoSrc","getVideoUrl","console","YoutubeViewer","normalizeUrl","toLowerCase","indexOf","getVideoRatio","wrapper","element","querySelector","clientHeight","clientWidth","fixVideoRatio","ReactDOM","findDOMNode","parentNode","ratio","style","validate","schema","componentWillReceiveProps","nextProps","isEqual","rest","context","onReady","classNames","video_player","onStart","controls","contextType","Context","defaultProps","VIDEO_TYPE","VIDEO_TYPE_LEGACY","DEFAULTS","config","size","alignment","YoutubeComponent","setPlayer","player","handleReady","isLoaded","renderOverlay","overlayText","video_overlay","video_overlay_message","renderPlayer","onKeyDown","handler","key","isPlayable","blockProps","readOnly","isLoading","handlePlayerFocus","componentDidUpdate","tabIndex","className","onClick","containerClassNames","video_container","React","componentState","store","name","tooltipText","Icon","toolbars","TOOLBARS","FOOTER","SIDE","createToolbar","InlineButtons","createInlineButtons","InsertButtons","createInsertButtons","createYoutubePlugin","createBasePlugin","component","legacyType","toolbar","Modals","YOUTUBE_SELECTION_INPUT","ModalsMap"],"mappings":"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"}